<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction au tidyverse • ecotools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction au tidyverse">
<meta property="og:description" content="">
<meta property="og:image" content="https://davidcarayon.github.io/ecotools/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecotools</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/vign_ecotools.html">
    <span class="fa fa-book"></span>
     
    Documentation
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Fonctions
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bonnes_pratiques.html">Bonnes pratiques générales</a>
    </li>
    <li>
      <a href="../articles/import.html">Importer des données</a>
    </li>
    <li>
      <a href="../articles/tidy.html">Introduction au tidyverse</a>
    </li>
    <li>
      <a href="../articles/na_work.html">Travailler avec des NA</a>
    </li>
    <li>
      <a href="../articles/pb_spread.html">Attention à matrify() !</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://hydrobio-dce.irstea.fr/">
    <span class="fa fa-tint"></span>
     
    Hydrobio-DCE
  </a>
</li>
<li>
  <a href="https://github.com/davidcarayon/ecotools">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction au tidyverse</h1>
                        <h4 class="author">David Carayon</h4>
            
            <h4 class="date">2018-04-12</h4>
      
      <small>Source: <a href="https://github.com/davidcarayon/ecotools/blob/master/vignettes/tidy.Rmd"><code>vignettes/tidy.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<style type="text/css">

body{ /* Normal  */
      font-size: 15px;
  }
code.r{ /* Code block */
    font-size: 12px;
}
pre { /* Code block - determines code spacing between lines */
    font-size: 14px;
}
</style>
<div id="le-tidyverse" class="section level1">
<h1 class="hasAnchor">
<a href="#le-tidyverse" class="anchor"></a>Le Tidyverse</h1>
<div class="figure">
<img src="img/tidyverse.png">
</div>
<p>Le tidyverse est un projet de workflow de packages, fournissant des outils de programmation R complémentaires allant depuis l’import de données jusqu’à la visualisation et la communication des résultats.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="tibble" class="section level1">
<h1 class="hasAnchor">
<a href="#tibble" class="anchor"></a>Tibble</h1>
<div class="figure">
<img src="img/tibble.png">
</div>
<p>Un des principaux apports du tidyverse, c’est le format de table tibble.</p>
<p>Les tibble sont quasiment identiques aux data.frames, mais ils en font “moins”. C’est à dire qu’ils ne changent jamais le type des variables par eux-mêmes, et affichent des messages d’erreurs au moindre problème (ce qui permet tout de même d’identifier des erreurs dès le début). Il sont également optimisés pour avoir un meilleur affichage dans la console.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># tibble</span>
tb_iris&lt;-<span class="kw">tbl_df</span>(iris[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,])
tb_iris</code></pre></div>
<pre><code>## # A tibble: 10 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##  *        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
##  1         5.10        3.50         1.40       0.200 setosa 
##  2         4.90        3.00         1.40       0.200 setosa 
##  3         4.70        3.20         1.30       0.200 setosa 
##  4         4.60        3.10         1.50       0.200 setosa 
##  5         5.00        3.60         1.40       0.200 setosa 
##  6         5.40        3.90         1.70       0.400 setosa 
##  7         4.60        3.40         1.40       0.300 setosa 
##  8         5.00        3.40         1.50       0.200 setosa 
##  9         4.40        2.90         1.40       0.200 setosa 
## 10         4.90        3.10         1.50       0.100 setosa</code></pre>
<p>La fonction <code>glimpse</code> est une version améliorée de <code>str</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(tb_iris)</code></pre></div>
<pre><code>## Observations: 10
## Variables: 5
## $ Sepal.Length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9
## $ Sepal.Width  &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1
## $ Petal.Length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5
## $ Petal.Width  &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1
## $ Species      &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, s...</code></pre>
<p>Attention cependant, des packages autres que ceux du tidyverse n’ont pas forcémment encore adapté leurs fonctions pour travailler avec des tibble. Il vaut peut être mieux dans ce cas là repasser sur du <code>as.data.frame</code></p>
</div>
<div id="readr" class="section level1">
<h1 class="hasAnchor">
<a href="#readr" class="anchor"></a>Readr</h1>
<div class="figure">
<img src="img/readr.png">
</div>
<p>Les tableaux tibble sont parfaitement compatibles avec les packages du tidyverse, c’est notamment le format de sortie des fonctions du package <code>readr</code>, qui sont très semblables aux fonctions d’import de base mais en beaucoup plus rapide (jusqu’à 10x selon certains tests)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data&lt;-<span class="st"> </span><span class="kw">read_csv2</span>(<span class="st">"data.csv"</span>)</code></pre></div>
</div>
<div id="feather" class="section level1">
<h1 class="hasAnchor">
<a href="#feather" class="anchor"></a>Feather</h1>
<div class="figure">
<img src="img/feather.png">
</div>
<p>Feather est un projet visant à créer un format de fichier qui serait la signature de Rstudio. Les <a href="https://blog.dominodatalab.com/the-r-data-i-o-shootout/">benchmark</a> réalisés ont démontré que sa vitesse d’écriture et de lecture sont bien plus rapides que du .csv</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(feather)

<span class="kw">data</span>(mtcars)

<span class="kw"><a href="http://www.rdocumentation.org/packages/feather/topics/read_feather">write_feather</a></span>(mtcars,<span class="st">"mtcars.feather"</span>) <span class="co"># Produit un fichier signature de R : .feather</span>

<span class="kw"><a href="http://www.rdocumentation.org/packages/feather/topics/read_feather">read_feather</a></span>(<span class="st">"mtcars.feather"</span>)</code></pre></div>
</div>
<div id="dplyr-et-magitrr" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-et-magitrr" class="anchor"></a>Dplyr et magitrr</h1>
<div class="figure">
<img src="img/dplyr.png">
</div>
<p>Dplyr est un ensemble d’outils permettant de nettoyer, manipuler, réarranger ou résumer des données complexes.</p>
<p>C’est un pilier du tidyverse.</p>
<p>De part sa syntaxe proche de requêtes SQL (qui sont d’ailleurs traduites en SQL dans le cas de requêtes) dplyr permet une interaction avec des bases de données avec un langage beaucoup plus “R-friendly” et plus efficace que du R-SQL.</p>
<p>Le package tourne essentiellement autour de 7 fonctions phares, mais il en existe évidemment bien d’autres, disponibles <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">ici</a> :</p>
<ul>
<li><p><code>filter</code> : équivalent de <code>subset</code> qui permet de filter les données selon des opérateurs logiques.</p></li>
<li><p><code>select</code> : autre équivalent de <code>subset</code> qui permet de sélectionner un certain nombre de colonnes mais de manière beaucoup plus pratique, mêlant des avantages de SQL et de R.</p></li>
<li><p><code>left_join</code> : équivalent de <code>merge</code>, existe aussi en right_join (joint le tableau de gauche à celui de droite), full_join (équivalent de <code>all=TRUE</code>)</p></li>
<li><p><code>arrange</code> : équivalent de <code>order</code> mais l’ordre se définit soit par arrange(variable) soit arrange(desc(variable)).</p></li>
<li><p><code>group_by</code> : équivalent de <code>aggregate</code> mais beaucoup plus puissant quand il y a plus de 2 facteurs de groupes.</p></li>
<li><p><code>mutate</code> : permet de créer une nouvelle colonne par une formule impliquant les autres colonnes (colonne3=colonne1+colonne2). <code>transmute</code> supprime les colonnes utilisées pour le calcul.</p></li>
<li><p><code>summarise</code> : permet de créer un tableau résumant des infos (par ex : summarise (variable=median(variable))).</p></li>
</ul>
<div class="figure">
<img src="img/magitr.png">
</div>
<p><strong>Toutes ces fonctions ne semblent être que des équivalents de fonctions de base, mais elles révèlent toute leur efficacité une fois combinées aux pipes <code>%&gt;%</code> du package <code>magitrr</code>, qui permet d’alléger et simplifier de nombreux scripts.</strong></p>
<p>Pour faire simple, tout ce qui se situe à gauche d’un pipe devient le premier argument de la fonction suivant le pipe. Ce qui permet de se passer de nombreuses variables temporaires crées habituellement lors de chaque transformation.</p>
<p>L’explication la plus parlante reste encore l’exemple. L’objectif est ici d’obtenir la valeur médiane du seuil de quantification pour chaque paramètre physico-chimique, par fraction d’eau analysée.</p>
<p>Dans les deux cas, la connexion est la même.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Connexion à Pandore</span>
<span class="kw">library</span>(RMySQL)

pandore &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="kw">dbDriver</span>(<span class="st">"MySQL"</span>), <span class="dt">dbname=</span><span class="st">"pandore"</span>,<span class="dt">host=</span><span class="st">"195.221.113.106"</span>, <span class="dt">port=</span><span class="dv">3306</span>,<span class="dt">user=</span><span class="st">"*******"</span>, <span class="dt">password=</span><span class="st">"******"</span>)</code></pre></div>
</div>
<div id="processus-classique" class="section level1">
<h1 class="hasAnchor">
<a href="#processus-classique" class="anchor"></a>Processus classique</h1>
<p>Requêtes réalisées en SQL.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Requêtes </span>
compil=<span class="kw">dbGetQuery</span>(pandore,<span class="st">"SELECT * FROM compil"</span>,<span class="dt">n=</span><span class="op">-</span><span class="dv">1</span>) 
opecont_phychi=<span class="kw">dbGetQuery</span>(pandore,<span class="st">"SELECT * FROM opecont_phychi"</span>)
typo&lt;-<span class="kw">dbGetQuery</span>(pandore,<span class="st">"SELECT cd_site, classe_taille, riviere, commune FROM site"</span>,<span class="dt">n=</span><span class="op">-</span><span class="dv">1</span>)
liste_chy&lt;-<span class="kw">dbGetQuery</span>(pandore,<span class="st">"SELECT * FROM listes_phychi WHERE cd_param IN ('1301','1302','1303','1305','1311','1312','1313','1314','1319','1322','1335','1337','1338','1339','1340','1345','1347','1349','1350','1351','1433','1551','1819','1841','1842','5932','6018')"</span>,<span class="dt">n=</span><span class="op">-</span><span class="dv">1</span>)
lbl_param&lt;-<span class="kw">dbGetQuery</span>(pandore, <span class="st">"SELECT cd_param, lbcourt_param FROM sandre_parametre"</span>,<span class="dt">n=</span><span class="op">-</span><span class="dv">1</span>)
river&lt;-<span class="kw">dbGetQuery</span>(pandore, <span class="st">"SELECT cd_site, riviere, commune FROM site"</span>,<span class="dt">n=</span><span class="op">-</span><span class="dv">1</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">compil_chy&lt;-compil[<span class="kw">which</span>(compil<span class="op">$</span>support<span class="op">==</span><span class="st">"phychi"</span>),] <span class="co"># Tri support phychi</span>
compil_opecont_chy&lt;-<span class="kw">merge</span>(compil_chy,opecont_phychi, <span class="dt">by.x=</span><span class="st">"cd_opecont"</span>,<span class="dt">by.y=</span><span class="st">"cd_opecont"</span>) <span class="co">#liaison opecont/compil</span>
mix_phychi&lt;-<span class="kw">merge</span>(compil_opecont_chy,liste_chy,<span class="dt">by.x=</span><span class="st">"cd_obsPhyChi"</span>,<span class="dt">by.y=</span><span class="st">"cd_obsPhyChi"</span>) <span class="co"># liaison avec liste</span>
lbl=<span class="kw">merge</span>(mix_phychi,lbl_param, <span class="dt">by.x=</span><span class="st">"cd_param"</span>,<span class="dt">by.y=</span><span class="st">"cd_param"</span>)<span class="co"># Liaison labels et codes</span>
chimie_brute_complet=lbl[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">11</span>,<span class="dv">14</span>)]<span class="co"># tri des colonnes pour ne garder que les plus intéressantes</span>
chimie_brute=chimie_brute_complet[<span class="kw">which</span>(chimie_brute_complet<span class="op">$</span>date_opecont<span class="op">&gt;</span><span class="kw">as.Date</span>(<span class="st">"2004-01-01"</span>)),] <span class="co"># tri des dates &gt;2004</span>
chimie_brute=chimie_brute[<span class="kw">which</span>(chimie_brute<span class="op">$</span>cd_fraction<span class="op">&lt;</span><span class="dv">25</span>),] <span class="co"># Tri des fractions</span>
chimie_brute_remarque=chimie_brute[<span class="kw">which</span>(chimie_brute<span class="op">$</span>cd_remarque<span class="op">==</span><span class="dv">10</span>),] <span class="co"># tri code remarque seuil de quanti</span>
summary1 &lt;-<span class="st"> </span><span class="kw">aggregate</span>(resultat <span class="op">~</span><span class="st"> </span>lbcourt_param, <span class="dt">data=</span>chimie_brute_remarque,<span class="dt">FUN=</span>median)
summary2 &lt;-<span class="st"> </span><span class="kw">aggregate</span>(resultat <span class="op">~</span><span class="st"> </span>cd_fraction,<span class="dt">data=</span>chimie_brute_remarque,<span class="dt">FUN=</span>median)
analyse_quanti &lt;-<span class="st"> </span><span class="kw">merge</span>(summary1, summary2,<span class="dt">by=</span><span class="st">"lbcourt_param"</span>)</code></pre></div>
</div>
<div id="processus-via-dplyr" class="section level1">
<h1 class="hasAnchor">
<a href="#processus-via-dplyr" class="anchor"></a>Processus via dplyr</h1>
<p>Import des données avec la syntaxe propre à dplyr :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse) ; <span class="kw">library</span>(dbplyr)
compil=<span class="kw">tbl</span>(pandore,<span class="st">"compil"</span>) 
opecont_phychi=<span class="kw">tbl</span>(pandore,<span class="st">"opecont_phychi"</span>)
typo=<span class="kw">tbl</span>(pandore,<span class="st">"site"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(cd_site, classe_taille, riviere, commune)
vecteur_param&lt;-<span class="kw">c</span>(<span class="st">'1301'</span>,<span class="st">'1302'</span>,<span class="st">'1303'</span>,<span class="st">'1305'</span>,<span class="st">'1311'</span>,<span class="st">'1312'</span>,<span class="st">'1313'</span>,<span class="st">'1314'</span>,<span class="st">'1319'</span>,<span class="st">'1322'</span>,<span class="st">'1335'</span>,<span class="st">'1337'</span>,<span class="st">'1338'</span>,<span class="st">'1339'</span>,<span class="st">'1340'</span>,<span class="st">'1345'</span>,<span class="st">'1347'</span>,<span class="st">'1349'</span>,<span class="st">'1350'</span>,<span class="st">'1351'</span>,<span class="st">'1433'</span>,<span class="st">'1551'</span>,<span class="st">'1819'</span>,<span class="st">'1841'</span>,<span class="st">'1842'</span>,<span class="st">'5932'</span>,<span class="st">'6018'</span>)
liste_chy&lt;-<span class="kw">tbl</span>(pandore,<span class="st">"listes_phychi"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(cd_param <span class="op">%in%</span><span class="st"> </span>vecteur_param)
lbl_param&lt;-<span class="kw">tbl</span>(pandore,<span class="st">"sandre_parametre"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(cd_param, lbcourt_param)
river&lt;-<span class="kw">tbl</span>(pandore,<span class="st">"site"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(cd_site, riviere)</code></pre></div>
<p>En fait, derrière une requête dplyr, c’est bien du SQL qui est traduit :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">liste_chy <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">show_query</span>()</code></pre></div>
<p><sql><br>
SELECT *<br>
FROM <code>listes_phychi</code><br>
WHERE (<code>cd_param</code> IN (‘1301’, ‘1302’, ‘1303’, ‘1305’, ‘1311’, ‘1312’, ‘1313’, ‘1314’, ‘1319’, ‘1322’, ‘1335’, ‘1337’, ‘1338’, ‘1339’, ‘1340’, ‘1345’, ‘1347’, ‘1349’, ‘1350’, ‘1351’, ‘1433’, ‘1551’, ‘1819’, ‘1841’, ‘1842’, ‘5932’, ‘6018’))</sql></p>
<p>Puis, on peut exécuter toutes les requêtes d’un trait :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">analyse_quanti&lt;-compil <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(support<span class="op">==</span><span class="st">"phychi"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(opecont_phychi,<span class="dt">by=</span><span class="st">"cd_opecont"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(liste_chy,<span class="dt">by=</span><span class="st">"cd_obsPhyChi"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(lbl_param, <span class="dt">by=</span><span class="st">"cd_param"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(cd_param,cd_opecont<span class="op">:</span>cd_support,cd_fraction,resultat, cd_remarque, lbcourt_param) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(date_opecont <span class="op">&gt;</span><span class="st"> "2004-01-01"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cd_fraction <span class="op">&lt;</span><span class="st"> </span><span class="dv">25</span>, cd_remarque<span class="op">==</span><span class="dv">10</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(lbcourt_param) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">med_seuil=</span><span class="kw">median</span>(resultat))</code></pre></div>
<p><strong>BILAN</strong></p>
<p>Dplyr semble beaucoup mieux pensé pour créer des scripts propres, aérés, où l’erreur est beaucoup plus facile à identifier que lorsque l’on crée des variables temporaires. De plus, le temps d’exécution est beaucoup plus rapide (surtout pour les jointures de table). Dplyr, associé à quelques autres fonctions de tidyR (équivalent de matrify par exemple), permet de couvrir toute la partie import de données / mise en forme et préparation pour amorcer l’analyse &amp; visualisation.</p>
</div>
<div id="broom" class="section level1">
<h1 class="hasAnchor">
<a href="#broom" class="anchor"></a>Broom</h1>
<div class="figure">
<img src="img/broom.png">
</div>
<p>Il n’y a, pour le moment, pas de package dans le tidyverse dédidé à la modélisation. Cependant, le package broom fournit quelques fonctions très utiles :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">model&lt;-<span class="kw">lm</span>(Sepal.Length<span class="op">~</span>Sepal.Width, <span class="dt">data=</span>iris)
<span class="kw">summary</span>(model)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Sepal.Length ~ Sepal.Width, data = iris)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.5561 -0.6333 -0.1120  0.5579  2.2226 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   6.5262     0.4789   13.63   &lt;2e-16 ***
## Sepal.Width  -0.2234     0.1551   -1.44    0.152    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.8251 on 148 degrees of freedom
## Multiple R-squared:  0.01382,    Adjusted R-squared:  0.007159 
## F-statistic: 2.074 on 1 and 148 DF,  p-value: 0.1519</code></pre>
<p>Le problème ici, c’est que les différents éléments du modèle sont très difficile à indexer et à récupérer de manière automatique. Il serait donc mieux de ranger tout ça :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(broom)
<span class="kw"><a href="http://www.rdocumentation.org/packages/broom/topics/tidy">tidy</a></span>(model)</code></pre></div>
<pre><code>##          term   estimate std.error statistic      p.value
## 1 (Intercept)  6.5262226 0.4788963 13.627631 6.469702e-28
## 2 Sepal.Width -0.2233611 0.1550809 -1.440287 1.518983e-01</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#le-tidyverse">Le Tidyverse</a></li>
      <li><a href="#tibble">Tibble</a></li>
      <li><a href="#readr">Readr</a></li>
      <li><a href="#feather">Feather</a></li>
      <li><a href="#dplyr-et-magitrr">Dplyr et magitrr</a></li>
      <li><a href="#processus-classique">Processus classique</a></li>
      <li><a href="#processus-via-dplyr">Processus via dplyr</a></li>
      <li><a href="#broom">Broom</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by David Carayon, Sebastien Boutry, Thibault Leboucher, Marie Wach.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
